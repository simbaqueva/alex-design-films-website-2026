<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Wompi GitHub Pages - Alex Design Films</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .btn {
            background: #4CAF50;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }

        .btn:hover {
            background: #45a049;
        }

        .btn-secondary {
            background: #2196F3;
        }

        .btn-secondary:hover {
            background: #1976D2;
        }

        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .code {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
            overflow-x: auto;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .method-card {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: center;
        }

        .method-card.active {
            background: #e8f5e8;
            border-color: #4CAF50;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üß™ Test Wompi GitHub Pages</h1>
            <h2>Alex Design Films - Sandbox Mode</h2>
            <p>Esta p√°gina est√° dise√±ada para probar la integraci√≥n con Wompi en GitHub Pages</p>
        </div>

        <div class="test-section">
            <h3>üîç Informaci√≥n del Entorno</h3>
            <div id="environment-info">
                <p><strong>URL Actual:</strong> <span id="current-url"></span></p>
                <p><strong>GitHub Pages:</strong> <span id="is-github-pages"></span></p>
                <p><strong>Base Path:</strong> <span id="base-path"></span></p>
                <p><strong>Redirect URL:</strong> <span id="redirect-url"></span></p>
            </div>
        </div>

        <div class="test-section">
            <h3>üîß Configuraci√≥n de Wompi</h3>
            <div id="wompi-config">
                <p><strong>Modo:</strong> <span id="sandbox-mode"></span></p>
                <p><strong>Llave P√∫blica:</strong> <span id="public-key"></span></p>
                <p><strong>Moneda:</strong> <span id="currency"></span></p>
                <p><strong>Merchant:</strong> <span id="merchant"></span></p>
            </div>
        </div>

        <div class="test-section">
            <h3>üí≥ M√©todos de Pago Habilitados</h3>
            <div class="payment-methods" id="payment-methods">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>

        <div class="test-section">
            <h3>üõí Test de Pagos</h3>
            <p>Prueba diferentes montos y m√©todos de pago con el sandbox de Wompi:</p>

            <div>
                <label for="amount">Monto (COP):</label>
                <input type="number" id="amount" value="10000" min="1000" step="1000"
                    style="width: 150px; padding: 8px; margin: 10px;">
            </div>

            <div>
                <label for="description">Descripci√≥n:</label>
                <input type="text" id="description" value="Test payment GitHub Pages"
                    style="width: 300px; padding: 8px; margin: 10px;">
            </div>

            <button class="btn" onclick="testPayment()">üöÄ Iniciar Pago de Prueba</button>
            <button class="btn btn-secondary" onclick="testCardPayment()">üí≥ Test Tarjeta</button>
            <button class="btn btn-secondary" onclick="testNequiPayment()">üì± Test Nequi</button>
            <button class="btn btn-secondary" onclick="testPSEPayment()">üè¶ Test PSE</button>
        </div>

        <div class="test-section">
            <h3>üìä Estado de la Prueba</h3>
            <div id="test-status">
                <div class="info">‚ÑπÔ∏è Esperando inicio de pruebas...</div>
            </div>
        </div>

        <div class="test-section">
            <h3>üìù Datos de Prueba Wompi</h3>
            <div class="code">
                <strong>Tarjeta de Cr√©dito (Prueba):</strong><br>
                N√∫mero: 4242424242424242<br>
                CVV: 123<br>
                Fecha: 12/25<br>
                Nombre: CUALQUIER NOMBRE<br><br>

                <strong>Nequi (Prueba):</strong><br>
                N√∫mero: 3001234567<br><br>

                <strong>PSE (Prueba):</strong><br>
                Banco: Seleccione cualquier banco disponible<br>
                Tipo: Persona Natural<br>
            </div>
        </div>
    </div>

    <!-- Script de Wompi -->
    <script src="https://checkout.wompi.co/widget.js"></script>

    <!-- M√≥dulos del proyecto -->
    <script type="module">
        import { WOMPI_CONFIG } from './assets/js/config/wompi-config.js';

        // Funciones globales para onclick
        window.testPayment = testPayment;
        window.testCardPayment = testCardPayment;
        window.testNequiPayment = testNequiPayment;
        window.testPSEPayment = testPSEPayment;

        // Mostrar informaci√≥n del entorno
        function showEnvironmentInfo() {
            const currentUrl = window.location.href;
            const isGitHubPages = window.location.hostname.includes('github.io');
            const basePath = isGitHubPages ? '/alex-design-films-website-2026' : '';

            document.getElementById('current-url').textContent = currentUrl;
            document.getElementById('is-github-pages').textContent = isGitHubPages ? '‚úÖ S√≠' : '‚ùå No';
            document.getElementById('base-path').textContent = basePath || '(ninguno)';
            document.getElementById('redirect-url').textContent = WOMPI_CONFIG.REDIRECT_URL;
        }

        // Mostrar configuraci√≥n de Wompi
        function showWompiConfig() {
            document.getElementById('sandbox-mode').textContent = WOMPI_CONFIG.SANDBOX_MODE ? 'üß™ Sandbox' : 'üöÄ Producci√≥n';
            document.getElementById('public-key').textContent = WOMPI_CONFIG.getPublicKey().substring(0, 20) + '...';
            document.getElementById('currency').textContent = WOMPI_CONFIG.CURRENCY;
            document.getElementById('merchant').textContent = WOMPI_CONFIG.MERCHANT_NAME;
        }

        // Mostrar m√©todos de pago
        function showPaymentMethods() {
            const container = document.getElementById('payment-methods');
            const methods = WOMPI_CONFIG.getEnabledPaymentMethods();

            methods.forEach(method => {
                const card = document.createElement('div');
                card.className = 'method-card active';

                const icons = {
                    CARD: 'üí≥',
                    NEQUI: 'üì±',
                    PSE: 'üè¶',
                    BANCOLOMBIA_TRANSFER: 'üîÑ',
                    BANCOLOMBIA_QR: 'üì≤'
                };

                const names = {
                    CARD: 'Tarjeta',
                    NEQUI: 'Nequi',
                    PSE: 'PSE',
                    BANCOLOMBIA_TRANSFER: 'Transferencia Bancolombia',
                    BANCOLOMBIA_QR: 'QR Bancolombia'
                };

                card.innerHTML = `
                    <div style="font-size: 2em;">${icons[method] || 'üí∞'}</div>
                    <div><strong>${names[method] || method}</strong></div>
                    <div style="font-size: 0.9em; color: #666;">${method}</div>
                `;

                container.appendChild(card);
            });
        }

        // Funci√≥n para mostrar estado
        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('test-status');
            statusDiv.innerHTML = `<div class="${type}">${message}</div>`;
        }

        // Test de pago gen√©rico
        function testPayment() {
            const amount = document.getElementById('amount').value;
            const description = document.getElementById('description').value;

            showStatus('üöÄ Iniciando pago de prueba...', 'info');

            const checkout = new WidgetCheckout({
                currency: WOMPI_CONFIG.CURRENCY,
                amountInCents: amount * 100, // Convertir a centavos
                reference: `TEST_${Date.now()}`,
                publicKeyInSandbox: WOMPI_CONFIG.getPublicKey(),
                redirectUrl: WOMPI_CONFIG.REDIRECT_URL,
                customerData: {
                    email: 'test@alexdesignfilms.com',
                    fullName: 'Test User',
                    phoneNumber: '+573001234567',
                    phoneNumberPrefix: '+57',
                    legalId: '123456789',
                    legalIdType: 'CC'
                }
            });

            checkout.open(function (result) {
                if (result.transaction && result.transaction.status) {
                    showStatus(`‚úÖ Pago ${result.transaction.status}: ${result.transaction.reference}`, 'success');
                } else {
                    showStatus('‚ùå Pago cancelado o fallido', 'error');
                }
            });
        }

        // Test espec√≠fico para tarjeta
        function testCardPayment() {
            showStatus('üí≥ Iniciando pago con tarjeta...', 'info');
            document.getElementById('amount').value = '25000';
            document.getElementById('description').value = 'Test Tarjeta Cr√©dito';
            testPayment();
        }

        // Test espec√≠fico para Nequi
        function testNequiPayment() {
            showStatus('üì± Iniciando pago con Nequi...', 'info');
            document.getElementById('amount').value = '15000';
            document.getElementById('description').value = 'Test Nequi';
            testPayment();
        }

        // Test espec√≠fico para PSE
        function testPSEPayment() {
            showStatus('üè¶ Iniciando pago con PSE...', 'info');
            document.getElementById('amount').value = '50000';
            document.getElementById('description').value = 'Test PSE Transferencia';
            testPayment();
        }

        // Inicializar cuando cargue la p√°gina
        document.addEventListener('DOMContentLoaded', function () {
            showEnvironmentInfo();
            showWompiConfig();
            showPaymentMethods();
            showStatus('‚úÖ Configuraci√≥n cargada correctamente', 'success');
        });
    </script>
</body>

</html>